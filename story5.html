<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 5 â€“ The First Trial</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{cursor:pointer;border-radius:6px;}
.word:active{background:#ffe4f1;}

.card{
  margin-top:20px;
  background:#fff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 5</h1>
<div class="sub">The First Trial</div>

<div class="story" id="story">
The guardian slowly raised one hand.
The forest floor began to shake softly.
Stones moved and formed a narrow path.
This is your first trial, the guardian said gently.
The path was dark and full of strange sounds.
The child felt fear but remembered the warm light.
Step by step, the child walked forward.
Shadows moved, watching silently.
The glowing stone shined brighter with each step.
The first trial had begun.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story4.html">â† Previous Story</a>
  <a href="story6.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary (Story5 å…¨å˜èªå¯¾å¿œ) ===== */
const dict={
guardian:{jp:"å®ˆè­·è€…",hira:"ã—ã‚…ã”ã—ã‚ƒ"},
slowly:{jp:"ã‚†ã£ãã‚Š",hira:"ã‚†ã£ãã‚Š"},
raised:{jp:"ä¸Šã’ãŸ",hira:"ã‚ã’ãŸ"},
one:{jp:"ä¸€ã¤ã®",hira:"ã²ã¨ã¤ã®"},
hand:{jp:"æ‰‹",hira:"ã¦"},
forest:{jp:"æ£®",hira:"ã‚‚ã‚Š"},
floor:{jp:"åœ°é¢",hira:"ã˜ã‚ã‚“"},
began:{jp:"å§‹ã¾ã£ãŸ",hira:"ã¯ã˜ã¾ã£ãŸ"},
shake:{jp:"æºã‚Œã‚‹",hira:"ã‚†ã‚Œã‚‹"},
softly:{jp:"é™ã‹ã«",hira:"ã—ãšã‹ã«"},
stones:{jp:"çŸ³",hira:"ã„ã—"},
moved:{jp:"å‹•ã„ãŸ",hira:"ã†ã”ã„ãŸ"},
and:{jp:"ãã—ã¦",hira:"ãã—ã¦"},
formed:{jp:"å½¢ä½œã£ãŸ",hira:"ã‹ãŸã¡ã¥ãã£ãŸ"},
narrow:{jp:"ç‹­ã„",hira:"ã›ã¾ã„"},
path:{jp:"é“",hira:"ã¿ã¡"},
this:{jp:"ã“ã‚Œ",hira:"ã“ã‚Œ"},
is:{jp:"ã€œã§ã™",hira:"ã§ã™"},
your:{jp:"ã‚ãªãŸã®",hira:"ã‚ãªãŸã®"},
first:{jp:"æœ€åˆã®",hira:"ã•ã„ã—ã‚‡ã®"},
trial:{jp:"è©¦ç·´",hira:"ã—ã‚Œã‚“"},
said:{jp:"è¨€ã£ãŸ",hira:"ã„ã£ãŸ"},
gently:{jp:"ã‚„ã•ã—ã",hira:"ã‚„ã•ã—ã"},
was:{jp:"ã€œã ã£ãŸ",hira:"ã ã£ãŸ"},
dark:{jp:"æš—ã„",hira:"ãã‚‰ã„"},
full:{jp:"ã„ã£ã±ã„ã®",hira:"ã„ã£ã±ã„ã®"},
of:{jp:"ã€œã®",hira:"ã®"},
strange:{jp:"ä¸æ€è­°ãª",hira:"ãµã—ããª"},
sounds:{jp:"éŸ³",hira:"ãŠã¨"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
felt:{jp:"æ„Ÿã˜ãŸ",hira:"ã‹ã‚“ã˜ãŸ"},
fear:{jp:"æã‚Œ",hira:"ãŠãã‚Œ"},
but:{jp:"ã—ã‹ã—",hira:"ã—ã‹ã—"},
remembered:{jp:"æ€ã„å‡ºã—ãŸ",hira:"ãŠã‚‚ã„ã ã—ãŸ"},
warm:{jp:"æ¸©ã‹ã„",hira:"ã‚ãŸãŸã‹ã„"},
light:{jp:"å…‰",hira:"ã²ã‹ã‚Š"},
step:{jp:"ä¸€æ­©",hira:"ã„ã£ã½"},
by:{jp:"ã€œã”ã¨ã«",hira:"ã”ã¨ã«"},
walked:{jp:"æ­©ã„ãŸ",hira:"ã‚ã‚‹ã„ãŸ"},
forward:{jp:"å‰ã¸",hira:"ã¾ãˆã¸"},
shadows:{jp:"å½±",hira:"ã‹ã’"},
watching:{jp:"è¦‹å®ˆã£ã¦",hira:"ã¿ã¾ã‚‚ã£ã¦"},
silently:{jp:"é™ã‹ã«",hira:"ã—ãšã‹ã«"},
glowing:{jp:"å…‰ã‚‹",hira:"ã²ã‹ã‚‹"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
shined:{jp:"è¼ã„ãŸ",hira:"ã‹ãŒã‚„ã„ãŸ"},
brighter:{jp:"ã‚ˆã‚Šæ˜ã‚‹ã",hira:"ã‚ˆã‚Šã‚ã‹ã‚‹ã"},
with:{jp:"ã€œã¨å…±ã«",hira:"ã¨ã¨ã‚‚ã«"},
each:{jp:"ãã‚Œãã‚Œã®",hira:"ãã‚Œãã‚Œã®"},
had:{jp:"ã€œã—ãŸ",hira:"ã—ãŸ"},
begun:{jp:"å§‹ã¾ã£ãŸ",hira:"ã¯ã˜ã¾ã£ãŸ"}
};

/* ===== Word Tap ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;
  const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("en")&&v.name.includes("Female"));
  if(v) u.voice=v;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
