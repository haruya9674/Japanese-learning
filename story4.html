<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 4 â€“ The Guardian of Light</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{cursor:pointer;border-radius:6px;}
.word:active{background:#ffe4f1;}

.card{
  margin-top:20px;
  background:#fff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 4</h1>
<div class="sub">The Guardian of Light</div>

<div class="story" id="story">
After the shadow disappeared, the forest slowly became calm again.
The glowing stone floated gently in the air.
A warm light spread around the child.
From the light, a gentle guardian appeared.
The guardian had kind eyes and a soft voice.
You were chosen to protect this forest, the guardian said.
The child listened carefully, holding the glowing stone.
Dark creatures will come, but your heart is strong, the guardian continued.
The child felt courage grow inside.
This meeting would change the childâ€™s destiny forever.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story3.html">â† Previous Story</a>
  <a href="story5.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary (Story4 å…¨å˜èªå¯¾å¿œ) ===== */
const dict={
after:{jp:"ã€œã®å¾Œã§",hira:"ã®ã¡ã«"},
shadow:{jp:"å½±",hira:"ã‹ã’"},
disappeared:{jp:"æ¶ˆãˆãŸ",hira:"ããˆãŸ"},
forest:{jp:"æ£®",hira:"ã‚‚ã‚Š"},
slowly:{jp:"ã‚†ã£ãã‚Š",hira:"ã‚†ã£ãã‚Š"},
became:{jp:"ã€œã«ãªã£ãŸ",hira:"ãªã£ãŸ"},
calm:{jp:"ç©ã‚„ã‹",hira:"ãŠã ã‚„ã‹"},
again:{jp:"å†ã³",hira:"ãµãŸãŸã³"},
glowing:{jp:"å…‰ã‚‹",hira:"ã²ã‹ã‚‹"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
floated:{jp:"æµ®ã‹ã‚“ã ",hira:"ã†ã‹ã‚“ã "},
gently:{jp:"ã‚„ã•ã—ã",hira:"ã‚„ã•ã—ã"},
air:{jp:"ç©ºä¸­",hira:"ãã†ã¡ã‚…ã†"},
warm:{jp:"æ¸©ã‹ã„",hira:"ã‚ãŸãŸã‹ã„"},
light:{jp:"å…‰",hira:"ã²ã‹ã‚Š"},
spread:{jp:"åºƒãŒã£ãŸ",hira:"ã²ã‚ãŒã£ãŸ"},
around:{jp:"å‘¨ã‚Šã«",hira:"ã¾ã‚ã‚Šã«"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
from:{jp:"ã€œã‹ã‚‰",hira:"ã‹ã‚‰"},
gentle:{jp:"å„ªã—ã„",hira:"ã‚„ã•ã—ã„"},
guardian:{jp:"å®ˆè­·è€…",hira:"ã—ã‚…ã”ã—ã‚ƒ"},
appeared:{jp:"ç¾ã‚ŒãŸ",hira:"ã‚ã‚‰ã‚ã‚ŒãŸ"},
had:{jp:"æŒã£ã¦ã„ãŸ",hira:"ã‚‚ã£ã¦ã„ãŸ"},
kind:{jp:"å„ªã—ã„",hira:"ã‚„ã•ã—ã„"},
eyes:{jp:"ç›®",hira:"ã‚"},
soft:{jp:"æŸ”ã‚‰ã‹ã„",hira:"ã‚„ã‚ã‚‰ã‹ã„"},
voice:{jp:"å£°",hira:"ã“ãˆ"},
you:{jp:"ã‚ãªãŸ",hira:"ã‚ãªãŸ"},
were:{jp:"ã€œã ã£ãŸ",hira:"ã ã£ãŸ"},
chosen:{jp:"é¸ã°ã‚ŒãŸ",hira:"ãˆã‚‰ã°ã‚ŒãŸ"},
protect:{jp:"å®ˆã‚‹",hira:"ã¾ã‚‚ã‚‹"},
this:{jp:"ã“ã®",hira:"ã“ã®"},
said:{jp:"è¨€ã£ãŸ",hira:"ã„ã£ãŸ"},
listened:{jp:"èã„ãŸ",hira:"ãã„ãŸ"},
carefully:{jp:"æ³¨æ„æ·±ã",hira:"ã¡ã‚…ã†ã„ã¶ã‹ã"},
holding:{jp:"æŒã£ã¦",hira:"ã‚‚ã£ã¦"},
dark:{jp:"é—‡ã®",hira:"ã‚„ã¿ã®"},
creatures:{jp:"ç”Ÿãç‰©",hira:"ã„ãã‚‚ã®"},
will:{jp:"ã€œã™ã‚‹ã ã‚ã†",hira:"ã ã‚ã†"},
come:{jp:"æ¥ã‚‹",hira:"ãã‚‹"},
but:{jp:"ã—ã‹ã—",hira:"ã—ã‹ã—"},
your:{jp:"ã‚ãªãŸã®",hira:"ã‚ãªãŸã®"},
heart:{jp:"å¿ƒ",hira:"ã“ã“ã‚"},
strong:{jp:"å¼·ã„",hira:"ã¤ã‚ˆã„"},
continued:{jp:"ç¶šã‘ãŸ",hira:"ã¤ã¥ã‘ãŸ"},
felt:{jp:"æ„Ÿã˜ãŸ",hira:"ã‹ã‚“ã˜ãŸ"},
courage:{jp:"å‹‡æ°—",hira:"ã‚†ã†ã"},
grow:{jp:"æˆé•·ã™ã‚‹",hira:"ã›ã„ã¡ã‚‡ã†ã™ã‚‹"},
inside:{jp:"å†…å´ã§",hira:"ã†ã¡ãŒã‚ã§"},
meeting:{jp:"å‡ºä¼šã„",hira:"ã§ã‚ã„"},
would:{jp:"ã€œã ã‚ã†",hira:"ã ã‚ã†"},
change:{jp:"å¤‰ãˆã‚‹",hira:"ã‹ãˆã‚‹"},
destiny:{jp:"é‹å‘½",hira:"ã†ã‚“ã‚ã„"},
forever:{jp:"æ°¸é ã«",hira:"ãˆã„ãˆã‚“ã«"}
};

/* ===== Word Tap ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;
  const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("en")&&v.name.includes("Female"));
  if(v) u.voice=v;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
