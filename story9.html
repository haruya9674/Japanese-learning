<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 9 â€“ The Trial of Shadows</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{
  cursor:pointer;
  border-radius:6px;
}
.word:active{
  background:#ffe4f1;
}

/* ===== Dictionary ===== */
.card{
  margin-top:20px;
  background:#ffffff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 9</h1>
<div class="sub">The Trial of Shadows</div>

<div class="story" id="story">
The hidden path ended in a silent empty field.
Dark shadows slowly rose from the ground.
They looked like memories shaped by fear.
The guardian stepped back and spoke softly.
This is a trial only you can face.
The child's heart beat fast but their feet did not move.
Holding the glowing stone the child faced the shadows.
The light pushed back the darkness little by little.
The shadows faded leaving calm silence behind.
The child had passed the trial.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story8.html">â† Previous Story</a>
  <a href="story10.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary (Story9 å…¨å˜èªå¯¾å¿œ) ===== */
const dict={
the:{jp:"ãã®",hira:"ãã®"},
hidden:{jp:"éš ã•ã‚ŒãŸ",hira:"ã‹ãã•ã‚ŒãŸ"},
path:{jp:"é“",hira:"ã¿ã¡"},
ended:{jp:"çµ‚ã‚ã£ãŸ",hira:"ãŠã‚ã£ãŸ"},
in:{jp:"ã€œã®ä¸­ã§",hira:"ãªã‹ã§"},
a:{jp:"ä¸€ã¤ã®",hira:"ã²ã¨ã¤ã®"},
silent:{jp:"é™ã‹ãª",hira:"ã—ãšã‹ãª"},
empty:{jp:"ç©ºã®",hira:"ã‹ã‚‰ã®"},
field:{jp:"é‡åŸ",hira:"ã®ã¯ã‚‰"},
dark:{jp:"æš—ã„",hira:"ãã‚‰ã„"},
shadows:{jp:"å½±",hira:"ã‹ã’"},
slowly:{jp:"ã‚†ã£ãã‚Š",hira:"ã‚†ã£ãã‚Š"},
rose:{jp:"ç¾ã‚ŒãŸ",hira:"ã‚ã‚‰ã‚ã‚ŒãŸ"},
from:{jp:"ã€œã‹ã‚‰",hira:"ã‹ã‚‰"},
ground:{jp:"åœ°é¢",hira:"ã˜ã‚ã‚“"},
they:{jp:"ãã‚Œã‚‰ã¯",hira:"ãã‚Œã‚‰ã¯"},
looked:{jp:"è¦‹ãˆãŸ",hira:"ã¿ãˆãŸ"},
like:{jp:"ã€œã®ã‚ˆã†ãª",hira:"ã®ã‚ˆã†ãª"},
memories:{jp:"è¨˜æ†¶",hira:"ããŠã"},
shaped:{jp:"å½¢ä½œã‚‰ã‚ŒãŸ",hira:"ã‹ãŸã¡ã¥ãã‚‰ã‚ŒãŸ"},
by:{jp:"ã€œã«ã‚ˆã£ã¦",hira:"ã«ã‚ˆã£ã¦"},
fear:{jp:"æã‚Œ",hira:"ãŠãã‚Œ"},
guardian:{jp:"å®ˆè­·è€…",hira:"ã—ã‚…ã”ã—ã‚ƒ"},
stepped:{jp:"ä¸‹ãŒã£ãŸ",hira:"ã•ãŒã£ãŸ"},
back:{jp:"å¾Œã‚ã¸",hira:"ã†ã—ã‚ã¸"},
and:{jp:"ãã—ã¦",hira:"ãã—ã¦"},
spoke:{jp:"è©±ã—ãŸ",hira:"ã¯ãªã—ãŸ"},
softly:{jp:"ã‚„ã•ã—ã",hira:"ã‚„ã•ã—ã"},
this:{jp:"ã“ã‚Œã¯",hira:"ã“ã‚Œã¯"},
is:{jp:"ã€œã§ã‚ã‚‹",hira:"ã§ã‚ã‚‹"},
trial:{jp:"è©¦ç·´",hira:"ã—ã‚Œã‚“"},
only:{jp:"ãŸã ã€œã ã‘",hira:"ã ã‘"},
you:{jp:"ã‚ãªãŸ",hira:"ã‚ãªãŸ"},
can:{jp:"ã§ãã‚‹",hira:"ã§ãã‚‹"},
face:{jp:"ç«‹ã¡å‘ã‹ã†",hira:"ãŸã¡ã‚€ã‹ã†"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
heart:{jp:"å¿ƒ",hira:"ã“ã“ã‚"},
beat:{jp:"é¼“å‹•ã—ãŸ",hira:"ã“ã©ã†ã—ãŸ"},
fast:{jp:"é€Ÿã",hira:"ã¯ã‚„ã"},
but:{jp:"ã—ã‹ã—",hira:"ã—ã‹ã—"},
their:{jp:"å½¼ã‚‰ã®",hira:"ã‹ã‚Œã‚‰ã®"},
feet:{jp:"è¶³",hira:"ã‚ã—"},
did:{jp:"ã€œã—ãªã‹ã£ãŸ",hira:"ã—ãªã‹ã£ãŸ"},
not:{jp:"ãªã„",hira:"ãªã„"},
move:{jp:"å‹•ã",hira:"ã†ã”ã"},
holding:{jp:"æŒã¡ãªãŒã‚‰",hira:"ã‚‚ã¡ãªãŒã‚‰"},
glowing:{jp:"å…‰ã‚‹",hira:"ã²ã‹ã‚‹"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
faced:{jp:"å‘ãåˆã£ãŸ",hira:"ã‚€ãã‚ã£ãŸ"},
light:{jp:"å…‰",hira:"ã²ã‹ã‚Š"},
pushed:{jp:"æŠ¼ã—è¿”ã—ãŸ",hira:"ãŠã—ã‹ãˆã—ãŸ"},
darkness:{jp:"é—‡",hira:"ã‚„ã¿"},
little:{jp:"å°‘ã—",hira:"ã™ã“ã—"},
leaving:{jp:"æ®‹ã—ã¦",hira:"ã®ã“ã—ã¦"},
calm:{jp:"ç©ã‚„ã‹ãª",hira:"ãŠã ã‚„ã‹ãª"},
silence:{jp:"é™ã‘ã•",hira:"ã—ãšã‘ã•"},
behind:{jp:"å¾Œã«",hira:"ã‚ã¨ã«"},
had:{jp:"ã€œã—ãŸ",hira:"ã—ãŸ"},
passed:{jp:"ä¹—ã‚Šè¶ŠãˆãŸ",hira:"ã®ã‚Šã“ãˆãŸ"}
};

/* ===== Word Tap ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;
  const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("en")&&v.name.includes("Female"));
  if(v) u.voice=v;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
