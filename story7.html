<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Story 7 â€“ The Silent Guardian</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui,sans-serif;
  padding:20px;
  padding-bottom:160px;
  background:linear-gradient(180deg,#fff6fb,#f0fbff);
  max-width:620px;
  margin:auto;
}

h1{text-align:center;margin-bottom:6px;}
.sub{text-align:center;font-size:14px;color:#666;margin-bottom:20px;}

.story{
  background:white;
  padding:18px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
  font-size:18px;
  line-height:1.8;
}

.word{
  cursor:pointer;
  border-radius:6px;
}
.word:active{
  background:#ffe4f1;
}

/* ===== Dictionary ===== */
.card{
  margin-top:20px;
  background:#ffffff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 6px 14px rgba(0,0,0,.15);
}

.label{font-size:13px;color:#666;margin-top:10px;}
.text,.hiragana{font-size:18px;margin-top:4px;}
.hiragana{cursor:pointer;}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #ccc;
  margin-top:6px;
}

.controls{
  text-align:center;
  margin-top:20px;
}

button,a{
  display:inline-block;
  margin:6px;
  padding:12px 18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  background:white;
  text-decoration:none;
  color:#333;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
}
</style>
</head>

<body>

<a href="index.html">â† Back to Menu</a>

<h1>ğŸ“– Story 7</h1>
<div class="sub">The Silent Guardian</div>

<div class="story" id="story">
The cave became very quiet after the shadow disappeared.
The child could hear only their own breathing.
Suddenly, a tall stone figure appeared from the darkness.
Its eyes glowed softly like stars.
The guardian did not speak, but its presence felt kind.
Slowly, it pointed toward a hidden path.
The child understood this was a sign of trust.
With courage, the child stepped onto the path.
The guardian watched silently as the journey continued.
A new chapter was about to begin.
</div>

<div class="controls">
  <button onclick="readAll()">ğŸ”Š Read All</button>
  <a href="story6.html">â† Previous Story</a>
  <a href="story8.html">Next Story â†’</a>
</div>

<div class="card">
  <div class="label">ğŸ”¤ Word Checker</div>
  <input id="miniEng" placeholder="Tap a word or typeâ€¦" oninput="miniProcess()">

  <div class="label">Japanese</div>
  <div class="text" id="miniJP">â€”</div>

  <div class="label">Reading (Hiragana)</div>
  <div class="hiragana" id="miniHira" onclick="speakJP(miniHira.innerText)">â€”</div>

  <button onclick="speakEN()">ğŸ”Š English</button>
  <button onclick="speakJP(miniJP.innerText)">ğŸ”Š æ—¥æœ¬èª</button>
</div>

<script>
/* ===== Dictionary (Story7 å…¨å˜èªå¯¾å¿œ) ===== */
const dict={
the:{jp:"ãã®",hira:"ãã®"},
cave:{jp:"æ´çªŸ",hira:"ã©ã†ãã¤"},
became:{jp:"ã€œã«ãªã£ãŸ",hira:"ãªã£ãŸ"},
very:{jp:"ã¨ã¦ã‚‚",hira:"ã¨ã¦ã‚‚"},
quiet:{jp:"é™ã‹ãª",hira:"ã—ãšã‹ãª"},
after:{jp:"ã€œã®å¾Œã§",hira:"ã‚ã¨ã§"},
shadow:{jp:"å½±",hira:"ã‹ã’"},
disappeared:{jp:"æ¶ˆãˆãŸ",hira:"ããˆãŸ"},
child:{jp:"å­ã©ã‚‚",hira:"ã“ã©ã‚‚"},
could:{jp:"ã€œã§ããŸ",hira:"ã§ããŸ"},
hear:{jp:"èã",hira:"ãã"},
only:{jp:"ã ã‘",hira:"ã ã‘"},
their:{jp:"å½¼ã‚‰ã®",hira:"ã‹ã‚Œã‚‰ã®"},
own:{jp:"è‡ªåˆ†ã®",hira:"ã˜ã¶ã‚“ã®"},
breathing:{jp:"å‘¼å¸",hira:"ã“ãã‚…ã†"},
suddenly:{jp:"çªç„¶",hira:"ã¨ã¤ãœã‚“"},
a:{jp:"ä¸€ã¤ã®",hira:"ã²ã¨ã¤ã®"},
tall:{jp:"èƒŒã®é«˜ã„",hira:"ã›ã®ãŸã‹ã„"},
stone:{jp:"çŸ³",hira:"ã„ã—"},
figure:{jp:"å§¿",hira:"ã™ãŒãŸ"},
appeared:{jp:"ç¾ã‚ŒãŸ",hira:"ã‚ã‚‰ã‚ã‚ŒãŸ"},
from:{jp:"ã€œã‹ã‚‰",hira:"ã‹ã‚‰"},
darkness:{jp:"æš—é—‡",hira:"ãã‚‰ã‚„ã¿"},
its:{jp:"ãã‚Œã®",hira:"ãã‚Œã®"},
eyes:{jp:"ç›®",hira:"ã‚"},
glowed:{jp:"å…‰ã£ãŸ",hira:"ã²ã‹ã£ãŸ"},
softly:{jp:"ã‚„ã•ã—ã",hira:"ã‚„ã•ã—ã"},
like:{jp:"ã€œã®ã‚ˆã†ã«",hira:"ã®ã‚ˆã†ã«"},
stars:{jp:"æ˜Ÿ",hira:"ã»ã—"},
guardian:{jp:"å®ˆè­·è€…",hira:"ã—ã‚…ã”ã—ã‚ƒ"},
did:{jp:"ã—ãŸ",hira:"ã—ãŸ"},
not:{jp:"ã€œã—ãªã„",hira:"ã—ãªã„"},
speak:{jp:"è©±ã™",hira:"ã¯ãªã™"},
but:{jp:"ã—ã‹ã—",hira:"ã—ã‹ã—"},
presence:{jp:"å­˜åœ¨",hira:"ãã‚“ã–ã„"},
felt:{jp:"æ„Ÿã˜ãŸ",hira:"ã‹ã‚“ã˜ãŸ"},
kind:{jp:"å„ªã—ã„",hira:"ã‚„ã•ã—ã„"},
slowly:{jp:"ã‚†ã£ãã‚Š",hira:"ã‚†ã£ãã‚Š"},
it:{jp:"ãã‚Œã¯",hira:"ãã‚Œã¯"},
pointed:{jp:"æŒ‡ã•ã—ãŸ",hira:"ã‚†ã³ã•ã—ãŸ"},
toward:{jp:"ã€œã®æ–¹ã¸",hira:"ã»ã†ã¸"},
hidden:{jp:"éš ã•ã‚ŒãŸ",hira:"ã‹ãã•ã‚ŒãŸ"},
path:{jp:"é“",hira:"ã¿ã¡"},
understood:{jp:"ç†è§£ã—ãŸ",hira:"ã‚Šã‹ã„ã—ãŸ"},
this:{jp:"ã“ã‚Œã¯",hira:"ã“ã‚Œã¯"},
was:{jp:"ã€œã ã£ãŸ",hira:"ã ã£ãŸ"},
sign:{jp:"ã—ã‚‹ã—",hira:"ã—ã‚‹ã—"},
of:{jp:"ã€œã®",hira:"ã®"},
trust:{jp:"ä¿¡é ¼",hira:"ã—ã‚“ã‚‰ã„"},
with:{jp:"ã€œã¨å…±ã«",hira:"ã¨ã¨ã‚‚ã«"},
courage:{jp:"å‹‡æ°—",hira:"ã‚†ã†ã"},
stepped:{jp:"è¶³ã‚’è¸ã¿å‡ºã—ãŸ",hira:"ã‚ã—ã‚’ãµã¿ã ã—ãŸ"},
onto:{jp:"ã€œã®ä¸Šã¸",hira:"ã†ãˆã¸"},
watched:{jp:"è¦‹å®ˆã£ãŸ",hira:"ã¿ã¾ã‚‚ã£ãŸ"},
silently:{jp:"é™ã‹ã«",hira:"ã—ãšã‹ã«"},
as:{jp:"ã€œã—ãªãŒã‚‰",hira:"ã—ãªãŒã‚‰"},
journey:{jp:"æ—…",hira:"ãŸã³"},
continued:{jp:"ç¶šã„ãŸ",hira:"ã¤ã¥ã„ãŸ"},
new:{jp:"æ–°ã—ã„",hira:"ã‚ãŸã‚‰ã—ã„"},
chapter:{jp:"ç« ",hira:"ã—ã‚‡ã†"},
about:{jp:"ã€œã—ã‚ˆã†ã¨ã—ã¦",hira:"ã—ã‚ˆã†ã¨ã—ã¦"},
to:{jp:"ã€œã™ã‚‹",hira:"ã™ã‚‹"},
begin:{jp:"å§‹ã¾ã‚‹",hira:"ã¯ã˜ã¾ã‚‹"}
};

/* ===== Word Tap ===== */
const storyEl=document.getElementById("story");
const originalText=storyEl.innerText;

storyEl.innerHTML=originalText.split(/(\s+)/).map(w=>{
  if(/\s+/.test(w)) return w;
  const clean=w.toLowerCase().replace(/[^a-z]/g,"");
  return `<span class="word" onclick="selectWord('${clean}')">${w}</span>`;
}).join("");

function selectWord(w){
  miniEng.value=w;
  miniProcess();
  speakEN();
}

/* ===== Dictionary ===== */
function miniProcess(){
  const w=miniEng.value.toLowerCase().trim();
  if(dict[w]){
    miniJP.innerText=dict[w].jp;
    miniHira.innerText=dict[w].hira;
  }else{
    miniJP.innerText="â€”";
    miniHira.innerText="â€”";
  }
}

/* ===== Speech ===== */
function gentleEN(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="en-US";
  u.rate=0.5;
  u.pitch=1.3;
  const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("en")&&v.name.includes("Female"));
  if(v) u.voice=v;
  return u;
}

function speakEN(){
  if(!miniEng.value) return;
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(miniEng.value));
}

function speakJP(t){
  if(t==="â€”") return;
  const u=new SpeechSynthesisUtterance(t);
  u.lang="ja-JP";
  u.rate=0.5;
  u.pitch=1.2;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function readAll(){
  speechSynthesis.cancel();
  speechSynthesis.speak(gentleEN(originalText));
}
</script>

</body>
</html>
