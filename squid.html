<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ü¶ë „Ç§„Ç´„Ç≤„Éº„É† Squid Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:system-ui, sans-serif;
  text-align:center;
  padding:20px;
  background:
    radial-gradient(circle at 20% 20%, #ffecec 0%, transparent 40%),
    radial-gradient(circle at 80% 30%, #e8fff1 0%, transparent 40%),
    linear-gradient(180deg, #fff, #f2f2f2);
}

h1{ font-size:26px; margin-bottom:6px; }
.sub{ font-size:14px; color:#666; margin-bottom:20px; }

.field{
  width:280px;
  height:120px;
  border:4px solid #333;
  border-radius:14px;
  margin:20px auto;
  position:relative;
  background:#fff;
}

.player{
  width:30px;
  height:30px;
  border-radius:50%;
  background:#ff5a5a;
  position:absolute;
  left:0;
  top:45px;
}

.goal{
  position:absolute;
  right:0;
  top:0;
  width:6px;
  height:100%;
  background:#4caf50;
}

.light{ font-size:24px; font-weight:bold; margin:14px 0; }
.green{ color:#2e7d32; }
.red{ color:#c62828; }

button{
  padding:16px 26px;
  font-size:16px;
  border:none;
  border-radius:16px;
  margin:6px;
  box-shadow:0 4px 10px rgba(0,0,0,.2);
  user-select:none;
  -webkit-user-select:none;
  touch-action:manipulation;
}

.result{
  font-size:20px;
  margin-top:14px;
  min-height:1.5em;
}

.success{ color:#2e7d32; font-weight:bold; }
.fail{ color:#c62828; font-weight:bold; }

.back{ display:block; margin-top:14px; }
</style>
</head>

<body>

<h1>ü¶ë „Ç§„Ç´„Ç≤„Éº„É†</h1>
<div class="sub">Squid Game ‚Äì Red Light, Green Light</div>

<div class="field">
  <div class="goal"></div>
  <div id="player" class="player"></div>
</div>

<div id="light" class="light green">üü¢ GREEN LIGHT</div>

<button id="tapBtn">PRESS / Êäº„ÅóÁ∂ö„Åë„Çã</button><br>
<button onclick="resetGame()">START / RESET</button>

<div id="result" class="result"></div>
<a href="index.html" class="back">‚Üê BACK</a>

<script>
let pos = 0;
let state = "green";
let finished = false;
let holding = false;

const speed = 2;
const player = document.getElementById("player");
const lightEl = document.getElementById("light");
const resultEl = document.getElementById("result");
const btn = document.getElementById("tapBtn");

let lightTimer, moveTimer;

// ‰ø°Âè∑ÂàáÊõø
function startLight(){
  lightTimer = setInterval(()=>{
    if(finished) return;
    state = Math.random() > 0.5 ? "green" : "red";
    lightEl.textContent = state === "green" ? "üü¢ GREEN LIGHT" : "üî¥ RED LIGHT";
    lightEl.className = "light " + state;
  }, 1200);
}

// ÁßªÂãïÂá¶ÁêÜ
function startMove(){
  moveTimer = setInterval(()=>{
    if(finished) return;

    if(state === "red" && holding){
      finish(false);
      return;
    }

    if(holding && state === "green"){
      pos += speed;
      player.style.left = pos + "px";
      if(pos >= 250) finish(true);
    }
  }, 30);
}

function finish(success){
  finished = true;
  clearInterval(lightTimer);
  clearInterval(moveTimer);
  resultEl.textContent = success ? "üéâ SUCCESS / ÊàêÂäü" : "üí• FAILED / Â§±Êïó";
  resultEl.className = "result " + (success ? "success" : "fail");
}

function resetGame(){
  clearInterval(lightTimer);
  clearInterval(moveTimer);
  pos = 0;
  finished = false;
  holding = false;
  state = "green";
  player.style.left = "0px";
  resultEl.textContent = "";
  lightEl.textContent = "üü¢ GREEN LIGHT";
  lightEl.className = "light green";
  startLight();
  startMove();
}

// Êäº„Åô„ÉªÈõ¢„ÅôÔºà„Çπ„Éû„ÉõÔºãPCÔºâ
btn.addEventListener("mousedown", ()=> holding = true);
btn.addEventListener("mouseup", ()=> holding = false);
btn.addEventListener("mouseleave", ()=> holding = false);
btn.addEventListener("touchstart", ()=> holding = true);
btn.addEventListener("touchend", ()=> holding = false);

resetGame();
</script>

</body>
</html>
